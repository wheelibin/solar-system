(this["webpackJsonpsolar-system"]=this["webpackJsonpsolar-system"]||[]).push([[0],{111:function(e,t,a){},116:function(e,t,a){},118:function(e,t,a){},350:function(e,t,a){"use strict";a.r(t);a(110),a(111);var i,n=a(15),o=a.n(n),s=a(103),r=a.n(s),c=a(23),l=(a(116),a(8)),h=["Generating Solar System"],u=function(e){return e.show?Object(l.jsxs)("div",{className:"loading-indicator",children:[h[0],"..."]}):null},d=(a(118),function(e){var t=e.planet;if(!t)return null;var a=[["Name",t.name],["Diameter (km)",(2*t.radius).toLocaleString()],["Moons",t.moons.length],["Orbit Distance (km)",t.orbitRadius.toLocaleString()],["Orbital Speed (km/h)",Math.floor(t.orbitSpeed).toLocaleString()],["Orbital Inclanation (\xb0)",t.orbitInclanation]];return Object(l.jsxs)("div",{className:"planet-datasheet",children:[Object(l.jsx)("h2",{children:"Planet Info"}),Object(l.jsx)("ul",{className:"planet-datasheet__property-list",children:a.map((function(e){return Object(l.jsxs)("li",{className:"planet-datasheet__property",children:[Object(l.jsx)("strong",{children:e[0]}),Object(l.jsx)("p",{children:e[1]})]},e[0])}))})]})}),p=function(e){var t=e.solarSystemApp,a=Object(n.useState)(!0),i=Object(c.a)(a,2),o=i[0],s=i[1],r=Object(n.useState)(void 0),h=Object(c.a)(r,2),p=h[0],m=h[1];Object(n.useEffect)((function(){t.init(),t.onInitialising=b,t.onInitialised=g,t.onSelectPlanet=y}),[t]);var b=function(){s(!0)},g=function(){s(!1)},y=function(e){m(e)};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(u,{show:o}),Object(l.jsx)(d,{planet:p})]})},m=a(16),b=a(11),g=a(7),y=a.n(g),v=a(6),f=a(12),S=a(0),x=a(5),w=a(104),k=a.n(w),O=a(1),P=a(105),j=function(){function e(t){Object(S.a)(this,e),this.noiseGenerator=void 0,this.noiseGenerator=new P.a(t)}return Object(O.a)(e,[{key:"generateNoiseMap",value:function(e,t){for(var a=[],i=0;i<e;i++){a[i]=[];for(var n=0;n<t;n++){var o=this.getMixedFrequencyNoise(i,n,[.01,.02,.04,.08,.16,.32,.64,1.28]);o=Math.pow(o,2.3),a[i][n]=o}}return this.makeSeamlessVertically(a,.2*t),this.makeSeamlessHorizontally(a,.05*e),a}},{key:"getNoise",value:function(e,t,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=a*e+i,s=a*t+n,r=1/a,c=this.noiseGenerator.noise2D(o,s)/2+.5,l=r*c;return l}},{key:"getMixedFrequencyNoise",value:function(e,t,a){var i=this,n=0;return a.reduce((function(a,o,s){n+=1/o;var r=10*s,c=100*s;return a+i.getNoise(e,t,o,r,c)}),0)/n}},{key:"makeSeamlessHorizontally",value:function(e,t){for(var a=e.length,i=e[0].length,n=0;n<t;n++)for(var o=n/t,s=0;s<i;s++){var r=~~(a-t+n);e[r][s]=x.o.lerp(e[r][s],e[~~(t-n)][s],o)}}},{key:"makeSeamlessVertically",value:function(e,t){for(var a=e.length,i=e[0].length,n=0;n<t;n++)for(var o=Math.ceil(t-n),s=0;s<a;s++){for(var r=0,c=0,l=0,h=s-o;h<s+o;h++)h<0||h>=a||(r+=e[h][n],c+=e[h][i-n-1],l++);e[s][n]=r/l,e[s][i-n-1]=c/l}}}]),e}();!function(e){e[e.Star=0]="Star",e[e.Planet=1]="Planet",e[e.Moon=2]="Moon"}(i||(i={}));var A=function(){function e(t,a,i,n,o){Object(S.a)(this,e),this.id=void 0,this.name=void 0,this.entityType=void 0,this.entity=void 0,this.params=void 0,this.radius=void 0,this.sphere=void 0,this.orbit=void 0,this.textureWidth=void 0,this.textureHeight=void 0,this.maxTerrainHeight=void 0,this.loader=new x.C,this.sphereGeometry=void 0,this.orbitGeometry=void 0,this.material=void 0,this.heightMapTexture=void 0,this.colourMapTexture=void 0,this.texture=void 0,this.labelContext=void 0,this.labelTexture=void 0,this.labelSprite=void 0,this.labelScaleVector=new x.E,this.labelAspectRatio=void 0,this.id=t,this.name=a,this.entityType=i,this.radius=n,this.params=o,this.entity=new x.k,this.textureWidth=512,this.textureHeight=256}return Object(O.a)(e,[{key:"create",value:function(){var e=Object(f.a)(y.a.mark((function e(){var t,a,i,n,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.params.terrainHeight&&this.params.terrainHeight>0)){e.next=10;break}t=this.generateTerrainMaps(),this.heightMapTexture=new x.e(t.heightMap.canvas),this.colourMapTexture=new x.e(t.map.canvas),this.heightMapTexture.mapping=x.i,this.colourMapTexture.mapping=x.i,a=Math.ceil(this.params.terrainHeight*this.maxTerrainHeight),this.material=new x.r({bumpMap:this.heightMapTexture,bumpScale:a,map:this.colourMapTexture,displacementMap:this.heightMapTexture,displacementScale:a}),e.next=18;break;case 10:if(!this.params.texturePath){e.next=17;break}return e.next=13,this.loader.loadAsync(this.params.texturePath);case 13:this.texture=e.sent,this.material=new x.q({map:this.texture,color:this.params.colour}),e.next=18;break;case 17:this.material=new x.q({color:this.params.colour});case 18:return this.sphereGeometry=new x.w(this.radius,64,48),this.sphere=new x.p(this.sphereGeometry,this.material),this.sphere.castShadow=!!this.params.castShadow,this.sphere.receiveShadow=!!this.params.receiveShadow,this.params.hasLabel&&this.addLabel(),this.entity.add(this.sphere),this.params.orbitEntity&&(i=this.params.orbitEntity.sphere.position,n=this.params.orbitRadius||400,o=this.createOrbitCircle(n),this.entity.add(o),this.sphere.position.set(n,0,0),this.entity.position.set(i.x,i.y,i.z),this.entity.rotation.x=x.o.degToRad(this.params.orbitInclanation),this.entity.rotation.y=x.o.degToRad(360*this.params.orbitStartPosition)),e.abrupt("return",this);case 26:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"animate",value:function(e,t,a,i){if(e.getElapsedTime(),this.params.orbitEntity){var n=this.params.orbitSpeed/60/60/60*t,o=this.params.orbitDirection;this.entity.rotation.y+=n*o}if(this.params.spinSpeed){var s=this.params.spinSpeed/60/60/60;this.sphere.rotation.y+=s*t*this.params.spinDirection}if(this.params.hasLabel&&(this.labelSprite.visible=i,i)){var r=this.labelScaleVector.subVectors(this.sphere.position,a.position).length()/24;this.labelSprite.scale.set(r,r*this.labelAspectRatio,1),this.labelSprite.position.y=this.radius}}},{key:"show",value:function(){this.params.onShow&&this.params.onShow(this.id)}},{key:"dispose",value:function(){var e,t,a,i,n,o,s,r;null===(e=this.sphereGeometry)||void 0===e||e.dispose(),null===(t=this.orbitGeometry)||void 0===t||t.dispose(),null===(a=this.orbit)||void 0===a||a.dispose(),null===(i=this.material)||void 0===i||i.dispose(),null===(n=this.heightMapTexture)||void 0===n||n.dispose(),null===(o=this.colourMapTexture)||void 0===o||o.dispose(),null===(s=this.texture)||void 0===s||s.dispose(),null===(r=this.labelTexture)||void 0===r||r.dispose(),this._dispose()}},{key:"generateTerrainMaps",value:function(){for(var e=this.getCanvasContext(),t=e.createImageData(this.textureWidth,this.textureHeight),a=t.data,i=this.getCanvasContext(),n=i.createImageData(this.textureWidth,this.textureHeight),o=n.data,s=[].concat(Object(v.a)(this.params.baseSeed),[99999]).reduce((function(e,t){return e+t})),r=new j(s).generateNoiseMap(this.textureWidth,this.textureHeight),c=0;c<a.length;c+=4){for(var l=c/4%this.textureWidth,h=~~(c/4/this.textureWidth),u=255*r[l][h],d=[u,u,u,255],p=0;p<d.length;p++)a[c+p]=d[p];for(var m=this.getMapColour(u,h),b=0;b<m.length;b++)o[c+b]=m[b]}return e.putImageData(t,0,0),i.putImageData(n,0,0),{heightMap:e,map:i}}},{key:"getRangeColour",value:function(e,t){return this.lerpColour(e.dark,e.light,(t-e.min)/(e.max-e.min))}},{key:"lerpColour",value:function(e,t,a){var i=this.convertToColor(e).lerp(this.convertToColor(t),a);return[].concat(Object(v.a)(i.toArray()),[255])}},{key:"convertToColor",value:function(e){return(new x.g).setRGB(e[0],e[1],e[2])}},{key:"getCanvasContext",value:function(){var e=document.createElement("canvas").getContext("2d");return e.canvas.width=this.textureWidth,e.canvas.height=this.textureHeight,e.fillStyle="#fff",e.fillRect(0,0,e.canvas.width,e.canvas.height),e}},{key:"createOrbitCircle",value:function(e){this.orbitGeometry=new x.c;var t=[];this.orbit=new x.m({color:16777215,opacity:.5,transparent:!0});for(var a=0;a<=128;a++){var i=a/128*Math.PI*2;t.push(Math.cos(i)*e,0,Math.sin(i)*e)}var n=new Float32Array(t);return this.orbitGeometry.setAttribute("position",new x.b(n,3)),new x.l(this.orbitGeometry,this.orbit)}},{key:"addLabel",value:function(){this.labelContext=document.createElement("canvas").getContext("2d");this.labelContext.canvas.width=384,this.labelContext.canvas.height=384,this.labelContext.font="".concat(44,"pt 'Lucida Grande', sans-serif"),this.labelAspectRatio=this.labelContext.canvas.height/this.labelContext.canvas.width,this.labelContext.fillStyle="white",this.labelContext.textAlign="center",this.labelContext.fillText(this.name,this.labelContext.canvas.width/2,45),this.labelTexture=new x.B(this.labelContext.canvas),this.labelTexture.needsUpdate=!0;var e=new x.z({map:this.labelTexture,transparent:!0});this.labelSprite=new x.y(e),this.sphere.add(this.labelSprite)}}]),e}(),C=a(106),R=a(107),M=a(108),I=["Acanthis","Achelous","Acheron","Achilles","Achilles","Achlys","Actaeon","Admetus","Adoni","Aeacus","A\xebdon","Ae\xebtes","Aegisthus","Aegyptus","Aella","Aello","Aeneas","Aeolus","Aeternae","Aethon","Agamemnon","Aglaia","Agreus","Agriopas","Agrius","Ajax","Alcestis","Alcyone","Alcyoneus","Alecto","Alectryon","Alkyonides","Almops","Aloadae","Althaea","Amazon","Amazons","Ampelos","Amphion","Amphisbaena","Amphithemis","Amphitrite","Amphitryon","Amycus","Anchises","Andromache","Andromeda","Anteros","Antigone","Antino\xfcs","Antiphates","Aphrodit","Aphrodite","Apollo","Aquilo","Arachne","Arae","Ares","Arges","Argo","Argos","Argus","Argus","Ariadne","Arion","Arion","Artemi","Artemis","Asbolus","Ascalaphus","Asclepiu","Asclepius","Astarte","Asterius","Astraea","Atalanta","Atalanta","Athen","Athena","Athos","Atlas","Atreus","Atropos","Aurora","Auster","Autonous","Avernus","Bacchus","Balius","Bellerophon","Bellona","Bienor","Boreas","Briareus","Cadmus","Calliope","Calypso","Carduelis","Cassandra","Castor","Catoblepas","Celaeno","Centaur","Centauride","Centauromachy","Centaurs","Centaurus","Cephalus","Cepheus","Ceramici","Cerastes","Cerberus","Cercopes","Ceres","Cetus","Ceuthonymus","Ceyx","Chaos","Charon","Charybdis","Chimera","Chiron","Chiron","Chryseis","Chthonius","Circe","Clio","Clotho","Clytemnestra","Cornix","Coronis","Corvus","Crocotta","Crommyon","Cronu","Cronus","Cyclopes","Cycnus","Cyllarus","Cyprus","Daedalus","Daemons","Damarchus","Damysus","Danae","Dana\xefdes","Dana\xfcs","Daphne","Demete","Dictys","Dido","Diomedes","Dione","Dionysu","Dionysus","Dioscuri","Dryad","Dryads","Echion","Echo","Eidolon","Elatus","Electra","Empousa","Empusa","Enceladus","Endymion","Enyo","Eo","Eos","Erato","Erebus","Eridanos","Erigone","Erinyes","Eris","Ero","Eros","Eteocles","Euphrosyne","Europa","Eurus","Euryale","Eurydice","Eurynomos","Eurystheus","Eurytion","Eurytus","Euterpe","Fates","Fauns","Faunus","Favonius","Flora","Fortuna","Furie","Furies","Gadflies","Gaea","Gaia","Galatea","Ganymede","Gegenees","Gello","Gerana","Geryon","giant","Giantess","Gigantes","Golden Fleece","Gorgons","Graces","Graeae","Graeae","Griffin","Hade","Hades","Hades","halcyons","Hamadryads","Harpies","Heb","Hecate","Hecate","Hecatonchires","Hector","Hecuba","Helen","Helio","Helios","Helle","Hellhound","Hephaestu","Hephaestus","Hera","Hera","Heracles","Hercules","Herme","Hero","heroes","Hesperus","Hesti","Hestia","Hieracosphinx","Hippalectryon","Hippocampus","Hippodamia","Hippolyte","Hippolytus","Hippomenes","Hoopoe","Hyacinthus","Hydra","Hylaeus","Hylonome","Hyperion","Hypno","Hypnos","Iapetus","Icarus","Ichthyocentaurs","Io","Iobates","Ionia","Iphigenia","Ipotane","Iris","Ismene","Ixion","Janus","Jocasta","Juno","Jupiter","Juventas","Keres","Kobaloi","Labour","Ladon","Laelaps","Laestrygonians","Laius","Lamia","Lamiai","Lamos","Laoco\xf6n","Lapiths","Lares","Lark","Latona","Lavinia","Leda","Lerna","Lernaean Hydra","Let","Lethe","Leto","Lycaon","Lykaia","Maera","Maia","Manes","Manticore","Marsyas","Medea","Medea","Medusa","Megaera","Meleager","Melpomene","Memnon","Menelaus","Menoetes","Menoetius","Mentor","Merope","Midas","Mimas","Minerva","Minos","Minotaur","Mnemosyne","Momus","Monocerata","Mormo","Mormolykeia","Morpheus","Mors","Muse","Muses","Myrmekes","Mysia","Naiads","Napaeae","Narcissus","Nemea","Nemesis","Neoptolemus","nereid","Nessus","Nestor","Nestor","Nike","Niobe","Nomios","Notus","Ny","Nyctimene","Nyctimus","Nymphs","Nyx","Oceanids","Oceanu","Oceanus","Ocypete","Odontotyrannos","Odysseu","Odysseus","Oedipus","Oenoe","Oenone","Onocentaur","Ophiotaurus","Ops","Orestes","Orion","Orpheus","Orthrus","Ouroboros","Pa","Pallas","Pan","Pan","Pandora","Panes","panthers","Parcae","Paris","Parrhasia","Pasipha\xeb","Patroclus","Pegasus","Pegasus","Pelias","Pelops","Penates","Penelope","Periboea","Perimedes","Persephon","Persephone ","Perseus","Phaedra","Phaethon","Phaethon","Philoctetes","Philomela","Phineus","Phlegethon","Phoenix","Ph\xf3los","Pirithous","Pleiades","Plut","Pollux","Polybotes","Polyhymnia","Polymnia","Polynices","Polyphemus","Polyphemus","Polyxena","Pontus","Porphyrion","Poseido","Poseidon","Priam","Priapus","Procne","Procrustes","Prometheus","Proserpine","Proteus","Psyche","Pygmalion","Pyramus","Python","Quirinus","Rhadamanthus","Rhaecus","Rhe","Rhea","Romulus","Sarpedon","Saturn","Satyresses","Satyrs","Scylla","Selene","Semele","Sileni","Silenus","Silvanus","Siren","Sirens","Sisyphus","Sol","Somnus","Sphinx","Sterop","Stheno","Strix","Styx","Symplegades","Syrinx","Talos","Tantalus","Taras","Taraxippi","Tartarus","Telemachus","Tellus","Tereus","Terminus","Terpsichore","Thalia","Thanato","Thanatos","Thaumas","Themis","Theseus","Thisbe","Thoon","Thrace","Thyestes","Tiresias","Tisiphone","Titans","Tithonus","Tityos","Triton","Trojan","Turnus","Typhon","Ulysses","Urania","Uranus","Venus","Vesta","Virgil","Vulcan","Xanthus","Zephyrus","Zeu","Zeus"],D=a(109),H=a.n(D),L=function(){function e(){Object(S.a)(this,e)}return Object(O.a)(e,null,[{key:"getRandom",value:function(e){return H.a.factory({seed:e})()/4294967295}},{key:"getRandomInt",value:function(t,a,i){return Math.floor(e.getRandom(i)*(a-t+1)+t)}},{key:"getRandomFloat",value:function(t,a,i){return e.getRandom(i)*(a-t)+t}},{key:"coinToss",value:function(t){return e.getRandom(t)<=.5}},{key:"getRandomFromArray",value:function(e,t){return e[this.getRandomInt(0,e.length-1,t)]}},{key:"getRandomPointInSphere",value:function(e,t,a,i){t||(t=0),a||(a=0),i||(i=0);var n=Math.random(),o=Math.random(),s=2*Math.PI*n,r=Math.acos(1-2*o);return[t+e*Math.sin(r)*Math.cos(s),a+e*Math.sin(r)*Math.sin(s),i+e*Math.cos(r)]}}]),e}(),T=2440,E=69911,F=59223859,N=4498438348,G=172331,V=384400,_=1882709,W=62400,z=414e5,B=0,J=1,q=2,U=4,Z=6,K=7,Y=8,Q=9,X=10,$=11,ee=12,te=function(){function e(t){Object(S.a)(this,e),this.entityId=0,this.seed=void 0,this.solarSystem={stars:[],planets:[]},this.seed=t}return Object(O.a)(e,[{key:"getNextId",value:function(){return this.entityId++,this.entityId}},{key:"generate",value:function(){for(var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:695508,a=[{id:this.getNextId(),name:"Star ".concat(this.entityId),seed:[this.seed,0],position:[0,0,0],radius:t,terrainHeight:0,moons:[],orbitEntityId:0,orbitRadius:0,orbitSpeed:0,orbitDirection:0,orbitInclanation:0,orbitStartPosition:0,spinSpeed:L.getRandomFloat(1e-4,3e-4,[this.seed,0].concat([Z])),spinDirection:L.coinToss([this.seed,0].concat([X]))?1:-1}],i=0;i<a.length;i++){for(var n=a[i],o=[this.seed,i],s=L.getRandomInt(1,9,[].concat(o,[K])),r=this.createPlanetOrbitRadiuses(s,o),c=function(t){for(var a=[e.seed,i,t],o=L.getRandomInt(T,2*E,[].concat(a,[B])),c=e.createPlanet(t,a,o,s,r[t],n),l=L.getRandomInt(1,10,[].concat(a,[K])),h=new Array(l).fill(null).map((function(e,t){return L.getRandomInt(V,_,[].concat(a,[Y,t]))})).sort((function(e,t){return e-t})),u=0;u<l;u++){var d=[e.seed,i,t,u],p=L.getRandomInt(o/12,o/3,[].concat(d,[B])),m=e.createMoon(u,d,p,h[u],l);c.moons.push(m)}var g,y=Object(b.a)(c.moons);try{for(y.s();!(g=y.n()).done;){var v=g.value,f=1.5-v.orbitRadius/c.moons[c.moons.length-1].orbitRadius;v.orbitSpeed=f*W}}catch(S){y.e(S)}finally{y.f()}e.solarSystem.planets.push(c)},l=0;l<s;l++)c(l);var h,u=Object(b.a)(this.solarSystem.planets);try{for(u.s();!(h=u.n()).done;){var d=h.value,p=d.orbitRadius,m=this.solarSystem.planets[this.solarSystem.planets.length-1].orbitRadius,g=1.5-p/m;d.orbitSpeed=g*G}}catch(y){u.e(y)}finally{u.f()}this.solarSystem.stars.push(n)}return this.solarSystem}},{key:"createPlanetOrbitRadiuses",value:function(e,t){for(var a=new Array(e).fill(null).map((function(e,a){return L.getRandomInt(F,N,[].concat(Object(v.a)(t),[Y,a]))})).sort((function(e,t){return e-t})),i=0;i<a.length-1;i++){var n=a[i],o=a[i+1]-n;if(o<z)for(var s=i+1;s<a.length;s++)a[s]+=z-o}return a}},{key:"createMoon",value:function(e,t,a,i,n){var o=L.coinToss([].concat(Object(v.a)(t),[U]))?1:-1,s=L.getRandomFloat(.001,.005,[].concat(Object(v.a)(t),[Z]));return{id:this.getNextId(),name:"Moon ".concat(e+1),seed:t,radius:a,terrainHeight:L.getRandom([].concat(Object(v.a)(t),[J])),orbitEntityId:-1,orbitRadius:i,orbitDirection:o,orbitSpeed:(n-e)/n,orbitInclanation:L.getRandomInt(0,45,[].concat(Object(v.a)(t),[Q])),orbitStartPosition:L.getRandom([].concat(Object(v.a)(t),[$])),spinSpeed:s,spinDirection:L.coinToss([].concat(Object(v.a)(t),[X]))?1:-1,rgb:ae([].concat(Object(v.a)(t),[q])),moons:[]}}},{key:"createPlanet",value:function(e,t,a,i,n,o){var s=L.coinToss([].concat(Object(v.a)(t),[U]))?1:-1,r=L.getRandomFloat(.002,.006,[].concat(Object(v.a)(t),[Z])),c=L.getRandomFromArray(I,[].concat(Object(v.a)(t),[ee]));return{id:this.getNextId(),name:c,seed:t,radius:a,terrainHeight:1,orbitEntityId:o.id,orbitRadius:n,orbitDirection:s,orbitSpeed:(i-e)/i,orbitInclanation:L.getRandomInt(0,15,[].concat(Object(v.a)(t),[Q])),orbitStartPosition:L.getRandom([].concat(Object(v.a)(t),[$])),spinSpeed:r,spinDirection:L.coinToss([].concat(Object(v.a)(t),[X]))?1:-1,moons:[]}}}]),e}(),ae=function(e){return[L.getRandomFloat(.6,1,[].concat(Object(v.a)(e),[0])),L.getRandomFloat(.6,1,[].concat(Object(v.a)(e),[1])),L.getRandomFloat(.6,1,[].concat(Object(v.a)(e),[2]))]},ie=a(2),ne=a(3),oe=function(e){Object(ie.a)(a,e);var t=Object(ne.a)(a);function a(){var e;Object(S.a)(this,a);for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).maxTerrainHeight=5,e}return Object(O.a)(a,[{key:"_dispose",value:function(){}},{key:"getMapColour",value:function(e,t){var a=e/64,i=this.params.colour,n=i.r,o=i.g,s=i.b,r=[Math.floor(255*n),Math.floor(255*o),Math.floor(255*s),255];return[r[0]*a,r[1]*a,r[2]*a,r[3]]}}]),a}(A),se=function(e){Object(ie.a)(a,e);var t=Object(ne.a)(a);function a(){var e;Object(S.a)(this,a);for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).maxTerrainHeight=e.radius/16,e.colours={oceanDark:e.getRandomColour(0),oceanLight:e.getRandomColour(1),beachDark:e.getRandomColour(2),beachLight:e.getRandomColour(3),forestDark:e.getRandomColour(4),forestLight:e.getRandomColour(5),jungleDark:e.getRandomColour(6),jungleLight:e.getRandomColour(7),savannahDark:e.getRandomColour(8),savannahLight:e.getRandomColour(9),desertDark:e.getRandomColour(10),desertLight:e.getRandomColour(11),snowDark:e.getRandomColour(12),snowLight:e.getRandomColour(13)},e}return Object(O.a)(a,[{key:"_dispose",value:function(){}},{key:"getMapColour",value:function(e,t){return this.getColourForHeight(e)}},{key:"getColourForHeight",value:function(e){for(var t=0,a=[{min:0,max:60,dark:this.colours.oceanDark,light:this.colours.oceanLight},{min:60,max:70,dark:this.colours.oceanLight,light:this.colours.beachLight},{min:70,max:110,dark:this.colours.forestDark,light:this.colours.forestLight},{min:110,max:120,dark:this.colours.jungleDark,light:this.colours.jungleLight},{min:120,max:140,dark:this.colours.savannahDark,light:this.colours.savannahLight},{min:120,max:150,dark:this.colours.desertDark,light:this.colours.desertLight}];t<a.length;t++){var i=a[t];if(e<i.max)return this.getRangeColour(i,e)}return this.colours.snowLight}},{key:"getRandomColour",value:function(e){var t=[].concat(Object(v.a)(this.params.baseSeed),[e]);return[255*L.getRandomFloat(.2,1,[].concat(Object(v.a)(t),[0])),255*L.getRandomFloat(.2,1,[].concat(Object(v.a)(t),[1])),255*L.getRandomFloat(.2,1,[].concat(Object(v.a)(t),[2])),255]}}]),a}(A),re=function(e){Object(ie.a)(a,e);var t=Object(ne.a)(a);function a(e,i,n,o,s){var r;return Object(S.a)(this,a),(r=t.call(this,e,i,n,o,s)).maxTerrainHeight=0,r.params.terrainHeight=0,r.params.texturePath="assets/sun.jpg",r}return Object(O.a)(a,[{key:"_dispose",value:function(){}},{key:"getMapColour",value:function(e,t){var a=this.params.colour,i=a.r,n=a.g,o=a.b,s=[Math.floor(255*i),Math.floor(255*n),Math.floor(255*o),255];return[s[0],s[1],s[2],s[3]]}}]),a}(A),ce={oceanDark:[0,24,168,255],oceanLight:[0,105,148,255],beachDark:[140,129,95,255],beachLight:[221,202,146,255],forestDark:[0,66,37,255],forestLight:[0,127,72,255],jungleDark:[48,102,79,255],jungleLight:[57,122,94,255],savannahDark:[136,155,105,255],savannahLight:[165,189,126,255],desertDark:[175,175,144,255],desertLight:[198,198,167,255],snowDark:[200,200,200,255],snowLight:[255,255,255,255]},le=function(e){Object(ie.a)(a,e);var t=Object(ne.a)(a);function a(){var e;Object(S.a)(this,a);for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).maxTerrainHeight=e.radius/16,e}return Object(O.a)(a,[{key:"_dispose",value:function(){}},{key:"getMapColour",value:function(e,t){return this.getColourForHeight(e)}},{key:"getColourForHeight",value:function(e){for(var t=0,a=[{min:0,max:60,dark:ce.oceanDark,light:ce.oceanLight},{min:60,max:70,dark:ce.oceanLight,light:ce.beachLight},{min:70,max:110,dark:ce.forestDark,light:ce.forestLight},{min:110,max:120,dark:ce.jungleDark,light:ce.jungleLight},{min:120,max:140,dark:ce.savannahDark,light:ce.savannahLight},{min:120,max:150,dark:ce.desertDark,light:ce.desertLight}];t<a.length;t++){var i=a[t];if(e<i.max)return this.getRangeColour(i,e)}return ce.snowLight}}]),a}(A);r.a.render(Object(l.jsx)(o.a.StrictMode,{children:Object(l.jsx)(p,{solarSystemApp:new function e(){var t,a=this;Object(S.a)(this,e),this.solarSystem=void 0,this.isRunning=!1,this.scene=void 0,this.camera=void 0,this.clock=new x.f,this.bodies=[],this.renderer=void 0,this.orbitControls=void 0,this.stats=void 0,this.showPlanetId=void 0,this.cameraInitialPosition=void 0,this.spaceTexture=void 0,this.gui=void 0,this.guiViewActionsFolder=void 0,this.guiPlanetsFolder=void 0,this.ambientLight=void 0,this.pointLight=void 0,this.onInitialising=void 0,this.onInitialised=void 0,this.onSelectPlanet=void 0,this.options={seed:982174,simulationSpeed:3,showOrbits:!0,followPlanetName:"Star 1",trueScale:!1,showPlanetLabels:!1,showStats:!0},this.buttonHandlers={resetView:function(){a.resetView()},newSeed:function(){a.options.seed=x.o.randInt(1e5,999999),a.init()},changeSeed:function(){a.init()}},this.init=function(){a.onInitialising&&a.onInitialising(),a.gui.updateDisplay(),a.clearScene(),a.solarSystem=new te(a.options.seed).generate(),a.options.showPlanetLabels=a.options.trueScale,a._init().then((function(){a.resetView(),a.animate(),a.onInitialised&&a.onInitialised()}))},this._init=Object(f.a)(y.a.mark((function e(){var t,n,o,s,r,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.showPlanetId=-1,a.ambientLight=new x.a(16777215,.15),a.scene.add(a.ambientLight),a.pointLight=new x.t(16244886,1),a.pointLight.position.set(0,0,0),a.scene.add(a.pointLight),!a.options.trueScale){e.next=12;break}return e.next=9,a.renderRealisticSolarSystem();case 9:(t=a.camera.position).set.apply(t,Object(v.a)(a.cameraInitialPosition)),e.next=15;break;case 12:return e.next=14,a.renderSolarSystem();case 14:(n=a.camera.position).set.apply(n,Object(v.a)(a.cameraInitialPosition)).divideScalar(500);case 15:for(o=a.bodies.filter((function(e){return e.entityType===i.Planet})),s=a.bodies.filter((function(e){return e.entityType===i.Star}))[0],a.guiViewActionsFolder=a.gui.addFolder("View Options"),a.guiViewActionsFolder.open(),a.guiViewActionsFolder.add(a.options,"followPlanetName",[s.name].concat(Object(v.a)(o.map((function(e){return e.name}))))).name("Centre of View"),a.guiViewActionsFolder.add(a.buttonHandlers,"resetView").name("Reset View"),a.guiViewActionsFolder.add(a.options,"trueScale").name("True Scale").onChange(a.init),a.guiViewActionsFolder.add(a.options,"showOrbits").name("Orbits").onChange(a.toggleOrbits),a.guiViewActionsFolder.add(a.options,"showPlanetLabels").name("Labels"),a.guiViewActionsFolder.add(a.options,"showStats").name("Stats"),a.guiPlanetsFolder=a.gui.addFolder("Planets"),r=0;r<o.length;r++)c=o[r],a.guiPlanetsFolder.add(c,"show").name("#".concat(r+1,": ").concat(c.name));a.isRunning=!0;case 28:case"end":return e.stop()}}),e)}))),this.animate=function(){if(a.isRunning){if(requestAnimationFrame(a.animate),a.bodies.forEach((function(e){e.animate(a.clock,a.options.simulationSpeed/2,a.camera,a.options.showPlanetLabels&&-1===a.showPlanetId)})),a.options.showStats?(a.stats.dom.style.display="initial",a.stats.update()):a.stats.dom.style.display="none",a.showPlanetId>-1){var e=a.bodies.find((function(e){return e.id===a.showPlanetId}));if(e){var t=new x.E;e.sphere.getWorldPosition(t),a.camera.position.set(t.x+2*e.radius,t.y+2*e.radius,t.z+10*e.radius),a.camera.lookAt(t.x,t.y,t.z)}}else{var i=a.bodies.find((function(e){return e.name===a.options.followPlanetName}));if(i){var n=new x.E;i.sphere.getWorldPosition(n),a.orbitControls.target.set(n.x,n.y,n.z),a.orbitControls.update()}}a.renderer.render(a.scene,a.camera)}},this.clearScene=function(){var e,t;a.isRunning=!1;try{a.gui.removeFolder(a.guiViewActionsFolder),a.gui.removeFolder(a.guiPlanetsFolder),a.guiViewActionsFolder.destroy()}catch(o){}null===(e=a.ambientLight)||void 0===e||e.dispose(),null===(t=a.pointLight)||void 0===t||t.dispose();var i,n=Object(b.a)(a.bodies);try{for(n.s();!(i=n.n()).done;){i.value.dispose()}}catch(s){n.e(s)}finally{n.f()}a.bodies=[],a.scene.clear(),a.renderer.render(a.scene,a.camera)},this.resetView=function(){var e,t;(a.showPlanetId=-1,a.options.trueScale)?(e=a.camera.position).set.apply(e,Object(v.a)(a.cameraInitialPosition)):(t=a.camera.position).set.apply(t,Object(v.a)(a.cameraInitialPosition)).divideScalar(500);a.onSelectPlanet&&a.onSelectPlanet(void 0)},this.handleShowPlanet=function(e){if(a.showPlanetId=e,a.onSelectPlanet){var t=a.solarSystem.planets.find((function(t){return t.id===e}));a.onSelectPlanet(t)}},this.toggleOrbits=function(){var e,t=Object(b.a)(a.bodies);try{for(t.s();!(e=t.n()).done;){var i=e.value;i.orbit&&(i.orbit.opacity=0===i.orbit.opacity?.5:0)}}catch(n){t.e(n)}finally{t.f()}},this.renderRealisticSolarSystem=Object(f.a)(y.a.mark((function e(){var t,n,o,s,r,c,l,h,u,d;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=.001,n=Object(b.a)(a.solarSystem.stars),e.prev=2,n.s();case 4:if((o=n.n()).done){e.next=23;break}return s=o.value,r=s.radius*t,c=s.orbitRadius*t,l=s.orbitSpeed*t,h=new re(s.id,s.name,i.Star,r,{baseSeed:s.seed,position:s.position?Object(m.a)(x.E,Object(v.a)(s.position)):new x.E(0,0,0),colour:new x.g(16763424),orbitEntity:!1,orbitRadius:c,orbitDirection:s.orbitDirection,orbitSpeed:l,orbitInclanation:s.orbitInclanation,orbitStartPosition:s.orbitStartPosition,spinSpeed:s.spinSpeed,spinDirection:s.spinDirection}),e.next=12,h.create();case 12:a.bodies.push(h),a.scene.add(h.entity),u=y.a.mark((function e(n){var o,s,r,c,l,h,u,d,p,g,f,S,w,k,O;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.solarSystem.planets[n],s=o.radius*t,r=o.orbitRadius*t,c=o.orbitSpeed*t,l=a.bodies.find((function(e){return e.id===o.orbitEntityId})),h={baseSeed:o.seed,position:o.position?Object(m.a)(x.E,Object(v.a)(o.position)):l.entity.position,terrainHeight:o.terrainHeight,orbitEntity:l,orbitRadius:r,orbitDirection:o.orbitDirection,orbitSpeed:c,orbitInclanation:o.orbitInclanation,orbitStartPosition:o.orbitStartPosition,spinSpeed:o.spinSpeed,spinDirection:o.spinDirection,hasLabel:!0,onShow:a.handleShowPlanet},u=2===n?new le(o.id,o.name,i.Planet,s,h):new se(o.id,o.name,i.Planet,s,h),e.next=9,u.create();case 9:d=Object(b.a)(o.moons),e.prev=10,d.s();case 12:if((p=d.n()).done){e.next=25;break}return g=p.value,f=g.radius*t,S=g.orbitRadius*t,w=g.orbitSpeed*t,k=u,O=new oe(g.id,g.name,i.Moon,f,{baseSeed:g.seed,position:g.position?Object(m.a)(x.E,Object(v.a)(g.position)):k.entity.position,colour:g.rgb?Object(m.a)(x.g,Object(v.a)(g.rgb)):new x.g(1,1,1),terrainHeight:g.terrainHeight,orbitEntity:k,orbitRadius:S,orbitDirection:g.orbitDirection,orbitSpeed:w,orbitInclanation:g.orbitInclanation,orbitStartPosition:g.orbitStartPosition,spinSpeed:g.spinSpeed,spinDirection:o.spinDirection}),e.next=21,O.create();case 21:a.bodies.push(O),u.entity.add(O.entity);case 23:e.next=12;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(10),d.e(e.t0);case 30:return e.prev=30,d.f(),e.finish(30);case 33:a.bodies.push(u),a.scene.add(u.entity);case 35:case"end":return e.stop()}}),e,null,[[10,27,30,33]])})),d=0;case 16:if(!(d<a.solarSystem.planets.length)){e.next=21;break}return e.delegateYield(u(d),"t0",18);case 18:d++,e.next=16;break;case 21:e.next=4;break;case 23:e.next=28;break;case 25:e.prev=25,e.t1=e.catch(2),n.e(e.t1);case 28:return e.prev=28,n.f(),e.finish(28);case 31:case"end":return e.stop()}}),e,null,[[2,25,28,31]])}))),this.renderSolarSystem=Object(f.a)(y.a.mark((function e(){var t,n,o,s,r,c,l,h,u,d,p,g,f,S,w,O,P,j,A,C,R,M,I;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=.001,n=Object(b.a)(a.solarSystem.stars),e.prev=2,n.s();case 4:if((o=n.n()).done){e.next=27;break}return s=o.value,r=s.radius*t*4,c=s.orbitRadius*t,l=s.orbitSpeed*t,h=new re(s.id,s.name,i.Star,r,{baseSeed:s.seed,position:s.position?Object(m.a)(x.E,Object(v.a)(s.position)):new x.E(0,0,0),colour:new x.g(16763424),orbitEntity:!1,orbitRadius:c,orbitDirection:s.orbitDirection,orbitSpeed:l,orbitInclanation:s.orbitInclanation,orbitStartPosition:s.orbitStartPosition,spinSpeed:s.spinSpeed,spinDirection:s.spinDirection}),e.next=12,h.create();case 12:a.bodies.push(h),a.scene.add(h.entity),u=k()(a.solarSystem.planets),d=Object(b.a)(u);try{for(d.s();!(p=d.n()).done;){g=p.value,4,g.radius*=4,f=Object(b.a)(g.moons);try{for(f.s();!(S=f.n()).done;)(w=S.value).radius*=4,w.orbitSpeed*=4}catch(D){f.e(D)}finally{f.f()}}}catch(D){d.e(D)}finally{d.f()}for(O=0;O<u.length;O++)P=u[O],j=P.moons[P.moons.length-1].orbitRadius,0===O?P.orbitRadius=2*s.radius+2*j:(A=u[O-1],C=A.moons[A.moons.length-1].orbitRadius,P.orbitRadius=A.orbitRadius+C+j,R=(a.solarSystem.planets[O].orbitRadius-a.solarSystem.planets[O-1].orbitRadius)/a.solarSystem.planets[a.solarSystem.planets.length-1].orbitRadius,P.orbitRadius+=R*P.orbitRadius*.5);M=y.a.mark((function e(n){var o,s,r,c,l,h,d,p,g,f,S,w,k,O,P;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=u[n],s=o.radius*t,r=o.orbitRadius*t,c=o.orbitSpeed*t,l=a.bodies.find((function(e){return e.id===o.orbitEntityId})),h={baseSeed:o.seed,position:o.position?Object(m.a)(x.E,Object(v.a)(o.position)):l.entity.position,terrainHeight:o.terrainHeight,orbitEntity:l,orbitRadius:r,orbitDirection:o.orbitDirection,orbitSpeed:c,orbitInclanation:o.orbitInclanation,orbitStartPosition:o.orbitStartPosition,spinSpeed:o.spinSpeed,spinDirection:o.spinDirection,hasLabel:!0,onShow:a.handleShowPlanet},d=2===n?new le(o.id,o.name,i.Planet,s,h):new se(o.id,o.name,i.Planet,s,h),e.next=9,d.create();case 9:p=Object(b.a)(o.moons),e.prev=10,p.s();case 12:if((g=p.n()).done){e.next=25;break}return f=g.value,S=f.radius*t,w=f.orbitRadius*t,k=f.orbitSpeed*t*4,O=d,P=new oe(f.id,f.name,i.Moon,S,{baseSeed:f.seed,position:f.position?Object(m.a)(x.E,Object(v.a)(f.position)):O.entity.position,colour:f.rgb?Object(m.a)(x.g,Object(v.a)(f.rgb)):new x.g(1,1,1),terrainHeight:f.terrainHeight,orbitEntity:O,orbitRadius:w,orbitDirection:f.orbitDirection,orbitSpeed:k,orbitInclanation:f.orbitInclanation,orbitStartPosition:f.orbitStartPosition,spinSpeed:f.spinSpeed,spinDirection:o.spinDirection}),e.next=21,P.create();case 21:a.bodies.push(P),d.entity.add(P.entity);case 23:e.next=12;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(10),p.e(e.t0);case 30:return e.prev=30,p.f(),e.finish(30);case 33:a.bodies.push(d),a.scene.add(d.entity);case 35:case"end":return e.stop()}}),e,null,[[10,27,30,33]])})),I=0;case 20:if(!(I<u.length)){e.next=25;break}return e.delegateYield(M(I),"t0",22);case 22:I++,e.next=20;break;case 25:e.next=4;break;case 27:e.next=32;break;case 29:e.prev=29,e.t1=e.catch(2),n.e(e.t1);case 32:return e.prev=32,n.f(),e.finish(32);case 35:case"end":return e.stop()}}),e,null,[[2,29,32,35]])}))),this.solarSystem=new te(this.options.seed).generate(),this.scene=new x.v,this.scene.background=(new x.g).setHex(0);var n=new x.h;this.spaceTexture=n.load(["assets/kurt/space_ft.png","assets/kurt/space_bk.png","assets/kurt/space_up.png","assets/kurt/space_dn.png","assets/kurt/space_rt.png","assets/kurt/space_lf.png"]),this.scene.background=this.spaceTexture,this.camera=new x.d,this.camera=new x.s(25,window.innerWidth/window.innerHeight,50,1e10),this.cameraInitialPosition=[0,6*this.solarSystem.stars[0].radius,20*this.solarSystem.stars[0].radius],(t=this.camera.position).set.apply(t,Object(v.a)(this.cameraInitialPosition)),this.camera.lookAt(0,0,0),this.renderer=new x.F({powerPreference:"high-performance",antialias:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.shadowMap.enabled=!0,document.body.appendChild(this.renderer.domElement),this.orbitControls=new C.a(this.camera,this.renderer.domElement),this.orbitControls.enableDamping=!0,this.orbitControls.update(),this.stats=new R.a,document.body.appendChild(this.stats.dom),this.gui=new M.a,this.gui.width=300,this.gui.add(this.buttonHandlers,"newSeed").name("New Seed"),this.gui.add(this.options,"seed").name("Seed").onFinishChange(this.buttonHandlers.changeSeed),this.gui.add(this.options,"simulationSpeed",0,20,.1).name("Simulation Speed")}})}),document.getElementById("root"))}},[[350,1,2]]]);
//# sourceMappingURL=main.7e6edc95.chunk.js.map