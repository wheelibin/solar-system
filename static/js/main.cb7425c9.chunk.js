(this["webpackJsonpsolar-system"]=this["webpackJsonpsolar-system"]||[]).push([[0],{111:function(e,t,i){},116:function(e,t,i){},118:function(e,t,i){},350:function(e,t,i){"use strict";i.r(t);i(110),i(111);var a,n=i(15),o=i.n(n),s=i(103),r=i.n(s),c=i(23),l=(i(116),i(8)),h=function(e){return e.show?Object(l.jsx)("div",{className:"loading-indicator",children:"Generating Solar System..."}):null},u=(i(118),function(e){var t=e.planet;if(!t)return null;var i=[["Name",t.name],["Diameter (km)",(2*t.radius).toLocaleString()],["Moons",t.moons.length],["Orbit Distance (km)",t.orbitRadius.toLocaleString()],["Orbital Speed (km/h)",Math.floor(t.orbitSpeed).toLocaleString()],["Orbital Inclanation (\xb0)",t.orbitInclanation]];return Object(l.jsxs)("div",{className:"planet-datasheet",children:[Object(l.jsx)("h2",{children:"Planet Info"}),Object(l.jsx)("ul",{className:"planet-datasheet__property-list",children:i.map((function(e){return Object(l.jsxs)("li",{className:"planet-datasheet__property",children:[Object(l.jsx)("strong",{children:e[0]}),Object(l.jsx)("p",{children:e[1]})]},e[0])}))})]})}),d=function(e){var t=e.solarSystemApp,i=Object(n.useState)(!0),a=Object(c.a)(i,2),o=a[0],s=a[1],r=Object(n.useState)(void 0),d=Object(c.a)(r,2),p=d[0],m=d[1];Object(n.useEffect)((function(){t.init(),t.onInitialising=b,t.onInitialised=g,t.onSelectPlanet=y}),[t]);var b=function(){s(!0)},g=function(){s(!1)},y=function(e){m(e)};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(h,{show:o}),Object(l.jsx)(u,{planet:p})]})},p=i(16),m=i(11),b=i(7),g=i.n(b),y=i(6),v=i(12),f=i(0),S=i(5),x=i(104),w=i.n(x),k=i(1),O=i(105),P=function(){function e(t){Object(f.a)(this,e),this.noiseGenerator=void 0,this.noiseGenerator=new O.a(t)}return Object(k.a)(e,[{key:"generateNoiseMap",value:function(e,t){for(var i=[],a=0;a<e;a++){i[a]=[];for(var n=0;n<t;n++){var o=this.getMixedFrequencyNoise(a,n,[.01,.02,.04,.08,.16,.32,.64,1.28]);o=Math.pow(o,2.3),i[a][n]=o}}return this.makeSeamlessVertically(i,.2*t),this.makeSeamlessHorizontally(i,.05*e),i}},{key:"getNoise",value:function(e,t,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=i*e+a,s=i*t+n,r=1/i,c=this.noiseGenerator.noise2D(o,s)/2+.5,l=r*c;return l}},{key:"getMixedFrequencyNoise",value:function(e,t,i){var a=this,n=0;return i.reduce((function(i,o,s){n+=1/o;var r=10*s,c=100*s;return i+a.getNoise(e,t,o,r,c)}),0)/n}},{key:"makeSeamlessHorizontally",value:function(e,t){for(var i=e.length,a=e[0].length,n=0;n<t;n++)for(var o=n/t,s=0;s<a;s++){var r=~~(i-t+n);e[r][s]=S.o.lerp(e[r][s],e[~~(t-n)][s],o)}}},{key:"makeSeamlessVertically",value:function(e,t){for(var i=e.length,a=e[0].length,n=0;n<t;n++)for(var o=Math.ceil(t-n),s=0;s<i;s++){for(var r=0,c=0,l=0,h=s-o;h<s+o;h++)h<0||h>=i||(r+=e[h][n],c+=e[h][a-n-1],l++);e[s][n]=r/l,e[s][a-n-1]=c/l}}}]),e}();!function(e){e[e.Star=0]="Star",e[e.Planet=1]="Planet",e[e.Moon=2]="Moon"}(a||(a={}));var j=function(){function e(t,i,a,n,o){Object(f.a)(this,e),this.id=void 0,this.name=void 0,this.entityType=void 0,this.entity=void 0,this.params=void 0,this.radius=void 0,this.sphere=void 0,this.orbit=void 0,this.textureWidth=void 0,this.textureHeight=void 0,this.maxTerrainHeight=void 0,this.loader=new S.C,this.sphereGeometry=void 0,this.orbitGeometry=void 0,this.material=void 0,this.heightMapTexture=void 0,this.colourMapTexture=void 0,this.texture=void 0,this.labelContext=void 0,this.labelTexture=void 0,this.labelSprite=void 0,this.labelScaleVector=new S.E,this.labelAspectRatio=void 0,this.id=t,this.name=i,this.entityType=a,this.radius=n,this.params=o,this.entity=new S.k,this.textureWidth=512,this.textureHeight=256}return Object(k.a)(e,[{key:"create",value:function(){var e=Object(v.a)(g.a.mark((function e(){var t,i,a,n,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.params.terrainHeight&&this.params.terrainHeight>0)){e.next=10;break}t=this.generateTerrainMaps(),this.heightMapTexture=new S.e(t.heightMap.canvas),this.colourMapTexture=new S.e(t.map.canvas),this.heightMapTexture.mapping=S.i,this.colourMapTexture.mapping=S.i,i=Math.ceil(this.params.terrainHeight*this.maxTerrainHeight),this.material=new S.r({bumpMap:this.heightMapTexture,bumpScale:i,map:this.colourMapTexture,displacementMap:this.heightMapTexture,displacementScale:i}),e.next=18;break;case 10:if(!this.params.texturePath){e.next=17;break}return e.next=13,this.loader.loadAsync(this.params.texturePath);case 13:this.texture=e.sent,this.material=new S.q({map:this.texture,color:this.params.colour}),e.next=18;break;case 17:this.material=new S.q({color:this.params.colour});case 18:return this.sphereGeometry=new S.w(this.radius,64,48),this.sphere=new S.p(this.sphereGeometry,this.material),this.sphere.castShadow=!!this.params.castShadow,this.sphere.receiveShadow=!!this.params.receiveShadow,this.params.hasLabel&&this.addLabel(),this.entity.add(this.sphere),this.params.orbitEntity&&(a=this.params.orbitEntity.sphere.position,n=this.params.orbitRadius||400,o=this.createOrbitCircle(n),this.entity.add(o),this.sphere.position.set(n,0,0),this.entity.position.set(a.x,a.y,a.z),this.entity.rotation.x=S.o.degToRad(this.params.orbitInclanation),this.entity.rotation.y=S.o.degToRad(360*this.params.orbitStartPosition)),e.abrupt("return",this);case 26:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"animate",value:function(e,t,i){if(e.getElapsedTime(),this.params.orbitEntity){var a=this.params.orbitSpeed/60/60/60*t,n=this.params.orbitDirection;this.entity.rotation.y+=a*n}if(this.params.spinSpeed){var o=this.params.spinSpeed/60/60/60;this.sphere.rotation.y+=o*t*this.params.spinDirection}if(this.params.hasLabel){var s=this.labelScaleVector.subVectors(this.sphere.position,i.position).length()/24;this.labelSprite.scale.set(s,s*this.labelAspectRatio,1),this.labelSprite.position.y=this.radius}}},{key:"show",value:function(){this.params.onShow&&this.params.onShow(this.id)}},{key:"dispose",value:function(){var e,t,i,a,n,o,s,r;null===(e=this.sphereGeometry)||void 0===e||e.dispose(),null===(t=this.orbitGeometry)||void 0===t||t.dispose(),null===(i=this.orbit)||void 0===i||i.dispose(),null===(a=this.material)||void 0===a||a.dispose(),null===(n=this.heightMapTexture)||void 0===n||n.dispose(),null===(o=this.colourMapTexture)||void 0===o||o.dispose(),null===(s=this.texture)||void 0===s||s.dispose(),null===(r=this.labelTexture)||void 0===r||r.dispose(),this._dispose()}},{key:"generateTerrainMaps",value:function(){for(var e=this.getCanvasContext(),t=e.createImageData(this.textureWidth,this.textureHeight),i=t.data,a=this.getCanvasContext(),n=a.createImageData(this.textureWidth,this.textureHeight),o=n.data,s=[].concat(Object(y.a)(this.params.baseSeed),[99999]).reduce((function(e,t){return e+t})),r=new P(s).generateNoiseMap(this.textureWidth,this.textureHeight),c=0;c<i.length;c+=4){for(var l=c/4%this.textureWidth,h=~~(c/4/this.textureWidth),u=255*r[l][h],d=[u,u,u,255],p=0;p<d.length;p++)i[c+p]=d[p];for(var m=this.getMapColour(u,h),b=0;b<m.length;b++)o[c+b]=m[b]}return e.putImageData(t,0,0),a.putImageData(n,0,0),{heightMap:e,map:a}}},{key:"getRangeColour",value:function(e,t){return this.lerpColour(e.dark,e.light,(t-e.min)/(e.max-e.min))}},{key:"lerpColour",value:function(e,t,i){var a=this.convertToColor(e).lerp(this.convertToColor(t),i);return[].concat(Object(y.a)(a.toArray()),[255])}},{key:"convertToColor",value:function(e){return(new S.g).setRGB(e[0],e[1],e[2])}},{key:"getCanvasContext",value:function(){var e=document.createElement("canvas").getContext("2d");return e.canvas.width=this.textureWidth,e.canvas.height=this.textureHeight,e.fillStyle="#fff",e.fillRect(0,0,e.canvas.width,e.canvas.height),e}},{key:"createOrbitCircle",value:function(e){this.orbitGeometry=new S.c;var t=[];this.orbit=new S.m({color:16777215,opacity:.5,transparent:!0});for(var i=0;i<=128;i++){var a=i/128*Math.PI*2;t.push(Math.cos(a)*e,0,Math.sin(a)*e)}var n=new Float32Array(t);return this.orbitGeometry.setAttribute("position",new S.b(n,3)),new S.l(this.orbitGeometry,this.orbit)}},{key:"addLabel",value:function(){this.labelContext=document.createElement("canvas").getContext("2d");this.labelContext.canvas.width=384,this.labelContext.canvas.height=384,this.labelContext.font="".concat(44,"pt 'Lucida Grande', sans-serif"),this.labelAspectRatio=this.labelContext.canvas.height/this.labelContext.canvas.width,this.labelContext.fillStyle="white",this.labelContext.textAlign="center",this.labelContext.fillText(this.name,this.labelContext.canvas.width/2,45),this.labelTexture=new S.B(this.labelContext.canvas),this.labelTexture.needsUpdate=!0;var e=new S.z({map:this.labelTexture,transparent:!0});this.labelSprite=new S.y(e),this.sphere.add(this.labelSprite)}}]),e}(),A=i(106),C=i(107),R=i(108),M=["Acanthis","Achelous","Acheron","Achilles","Achilles","Achlys","Actaeon","Admetus","Adoni","Aeacus","A\xebdon","Ae\xebtes","Aegisthus","Aegyptus","Aella","Aello","Aeneas","Aeolus","Aeternae","Aethon","Agamemnon","Aglaia","Agreus","Agriopas","Agrius","Ajax","Alcestis","Alcyone","Alcyoneus","Alecto","Alectryon","Alkyonides","Almops","Aloadae","Althaea","Amazon","Amazons","Ampelos","Amphion","Amphisbaena","Amphithemis","Amphitrite","Amphitryon","Amycus","Anchises","Andromache","Andromeda","Anteros","Antigone","Antino\xfcs","Antiphates","Aphrodit","Aphrodite","Apollo","Aquilo","Arachne","Arae","Ares","Arges","Argo","Argos","Argus","Argus","Ariadne","Arion","Arion","Artemi","Artemis","Asbolus","Ascalaphus","Asclepiu","Asclepius","Astarte","Asterius","Astraea","Atalanta","Atalanta","Athen","Athena","Athos","Atlas","Atreus","Atropos","Aurora","Auster","Autonous","Avernus","Bacchus","Balius","Bellerophon","Bellona","Bienor","Boreas","Briareus","Cadmus","Calliope","Calypso","Carduelis","Cassandra","Castor","Catoblepas","Celaeno","Centaur","Centauride","Centauromachy","Centaurs","Centaurus","Cephalus","Cepheus","Ceramici","Cerastes","Cerberus","Cercopes","Ceres","Cetus","Ceuthonymus","Ceyx","Chaos","Charon","Charybdis","Chimera","Chiron","Chiron","Chryseis","Chthonius","Circe","Clio","Clotho","Clytemnestra","Cornix","Coronis","Corvus","Crocotta","Crommyon","Cronu","Cronus","Cyclopes","Cycnus","Cyllarus","Cyprus","Daedalus","Daemons","Damarchus","Damysus","Danae","Dana\xefdes","Dana\xfcs","Daphne","Demete","Dictys","Dido","Diomedes","Dione","Dionysu","Dionysus","Dioscuri","Dryad","Dryads","Echion","Echo","Eidolon","Elatus","Electra","Empousa","Empusa","Enceladus","Endymion","Enyo","Eo","Eos","Erato","Erebus","Eridanos","Erigone","Erinyes","Eris","Ero","Eros","Eteocles","Euphrosyne","Europa","Eurus","Euryale","Eurydice","Eurynomos","Eurystheus","Eurytion","Eurytus","Euterpe","Fates","Fauns","Faunus","Favonius","Flora","Fortuna","Furie","Furies","Gadflies","Gaea","Gaia","Galatea","Ganymede","Gegenees","Gello","Gerana","Geryon","giant","Giantess","Gigantes","Golden Fleece","Gorgons","Graces","Graeae","Graeae","Griffin","Hade","Hades","Hades","halcyons","Hamadryads","Harpies","Heb","Hecate","Hecate","Hecatonchires","Hector","Hecuba","Helen","Helio","Helios","Helle","Hellhound","Hephaestu","Hephaestus","Hera","Hera","Heracles","Hercules","Herme","Hero","heroes","Hesperus","Hesti","Hestia","Hieracosphinx","Hippalectryon","Hippocampus","Hippodamia","Hippolyte","Hippolytus","Hippomenes","Hoopoe","Hyacinthus","Hydra","Hylaeus","Hylonome","Hyperion","Hypno","Hypnos","Iapetus","Icarus","Ichthyocentaurs","Io","Iobates","Ionia","Iphigenia","Ipotane","Iris","Ismene","Ixion","Janus","Jocasta","Juno","Jupiter","Juventas","Keres","Kobaloi","Labour","Ladon","Laelaps","Laestrygonians","Laius","Lamia","Lamiai","Lamos","Laoco\xf6n","Lapiths","Lares","Lark","Latona","Lavinia","Leda","Lerna","Lernaean Hydra","Let","Lethe","Leto","Lycaon","Lykaia","Maera","Maia","Manes","Manticore","Marsyas","Medea","Medea","Medusa","Megaera","Meleager","Melpomene","Memnon","Menelaus","Menoetes","Menoetius","Mentor","Merope","Midas","Mimas","Minerva","Minos","Minotaur","Mnemosyne","Momus","Monocerata","Mormo","Mormolykeia","Morpheus","Mors","Muse","Muses","Myrmekes","Mysia","Naiads","Napaeae","Narcissus","Nemea","Nemesis","Neoptolemus","nereid","Nessus","Nestor","Nestor","Nike","Niobe","Nomios","Notus","Ny","Nyctimene","Nyctimus","Nymphs","Nyx","Oceanids","Oceanu","Oceanus","Ocypete","Odontotyrannos","Odysseu","Odysseus","Oedipus","Oenoe","Oenone","Onocentaur","Ophiotaurus","Ops","Orestes","Orion","Orpheus","Orthrus","Ouroboros","Pa","Pallas","Pan","Pan","Pandora","Panes","panthers","Parcae","Paris","Parrhasia","Pasipha\xeb","Patroclus","Pegasus","Pegasus","Pelias","Pelops","Penates","Penelope","Periboea","Perimedes","Persephon","Persephone ","Perseus","Phaedra","Phaethon","Phaethon","Philoctetes","Philomela","Phineus","Phlegethon","Phoenix","Ph\xf3los","Pirithous","Pleiades","Plut","Pollux","Polybotes","Polyhymnia","Polymnia","Polynices","Polyphemus","Polyphemus","Polyxena","Pontus","Porphyrion","Poseido","Poseidon","Priam","Priapus","Procne","Procrustes","Prometheus","Proserpine","Proteus","Psyche","Pygmalion","Pyramus","Python","Quirinus","Rhadamanthus","Rhaecus","Rhe","Rhea","Romulus","Sarpedon","Saturn","Satyresses","Satyrs","Scylla","Selene","Semele","Sileni","Silenus","Silvanus","Siren","Sirens","Sisyphus","Sol","Somnus","Sphinx","Sterop","Stheno","Strix","Styx","Symplegades","Syrinx","Talos","Tantalus","Taras","Taraxippi","Tartarus","Telemachus","Tellus","Tereus","Terminus","Terpsichore","Thalia","Thanato","Thanatos","Thaumas","Themis","Theseus","Thisbe","Thoon","Thrace","Thyestes","Tiresias","Tisiphone","Titans","Tithonus","Tityos","Triton","Trojan","Turnus","Typhon","Ulysses","Urania","Uranus","Venus","Vesta","Virgil","Vulcan","Xanthus","Zephyrus","Zeu","Zeus"],D=i(109),H=i.n(D),I=function(){function e(){Object(f.a)(this,e)}return Object(k.a)(e,null,[{key:"getRandom",value:function(e){return H.a.factory({seed:e})()/4294967295}},{key:"getRandomInt",value:function(t,i,a){return Math.floor(e.getRandom(a)*(i-t+1)+t)}},{key:"getRandomFloat",value:function(t,i,a){return e.getRandom(a)*(i-t)+t}},{key:"coinToss",value:function(t){return e.getRandom(t)<=.5}},{key:"getRandomFromArray",value:function(e,t){return e[this.getRandomInt(0,e.length-1,t)]}},{key:"getRandomPointInSphere",value:function(e,t,i,a){t||(t=0),i||(i=0),a||(a=0);var n=Math.random(),o=Math.random(),s=2*Math.PI*n,r=Math.acos(1-2*o);return[t+e*Math.sin(r)*Math.cos(s),i+e*Math.sin(r)*Math.sin(s),a+e*Math.cos(r)]}}]),e}(),T=2440,L=69911,E=59223859,F=4498438348,N=172331,G=384400,V=1882709,_=62400,W=414e5,z=0,B=1,J=2,q=4,U=6,Z=7,K=8,Y=9,Q=10,X=11,$=12,ee=function(){function e(t){Object(f.a)(this,e),this.entityId=0,this.seed=void 0,this.solarSystem={stars:[],planets:[]},this.seed=t}return Object(k.a)(e,[{key:"getNextId",value:function(){return this.entityId++,this.entityId}},{key:"generate",value:function(){for(var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:695508,i=[{id:this.getNextId(),name:"Star ".concat(this.entityId),seed:[this.seed,0],position:[0,0,0],radius:t,terrainHeight:0,moons:[],orbitEntityId:0,orbitRadius:0,orbitSpeed:0,orbitDirection:0,orbitInclanation:0,orbitStartPosition:0,spinSpeed:I.getRandomFloat(1e-4,3e-4,[this.seed,0].concat([U])),spinDirection:I.coinToss([this.seed,0].concat([Q]))?1:-1}],a=0;a<i.length;a++){for(var n=i[a],o=[this.seed,a],s=I.getRandomInt(1,9,[].concat(o,[Z])),r=this.createPlanetOrbitRadiuses(s,o),c=function(t){for(var i=[e.seed,a,t],o=I.getRandomInt(T,2*L,[].concat(i,[z])),c=e.createPlanet(t,i,o,s,r[t],n),l=I.getRandomInt(1,10,[].concat(i,[Z])),h=new Array(l).fill(null).map((function(e,t){return I.getRandomInt(G,V,[].concat(i,[K,t]))})).sort((function(e,t){return e-t})),u=0;u<l;u++){var d=[e.seed,a,t,u],p=I.getRandomInt(o/12,o/3,[].concat(d,[z])),b=e.createMoon(u,d,p,h[u],l);c.moons.push(b)}var g,y=Object(m.a)(c.moons);try{for(y.s();!(g=y.n()).done;){var v=g.value,f=1.5-v.orbitRadius/c.moons[c.moons.length-1].orbitRadius;v.orbitSpeed=f*_}}catch(S){y.e(S)}finally{y.f()}e.solarSystem.planets.push(c)},l=0;l<s;l++)c(l);var h,u=Object(m.a)(this.solarSystem.planets);try{for(u.s();!(h=u.n()).done;){var d=h.value,p=d.orbitRadius,b=this.solarSystem.planets[this.solarSystem.planets.length-1].orbitRadius,g=1.5-p/b;d.orbitSpeed=g*N}}catch(y){u.e(y)}finally{u.f()}this.solarSystem.stars.push(n)}return this.solarSystem}},{key:"createPlanetOrbitRadiuses",value:function(e,t){for(var i=new Array(e).fill(null).map((function(e,i){return I.getRandomInt(E,F,[].concat(Object(y.a)(t),[K,i]))})).sort((function(e,t){return e-t})),a=0;a<i.length-1;a++){var n=i[a],o=i[a+1]-n;if(o<W)for(var s=a+1;s<i.length;s++)i[s]+=W-o}return i}},{key:"createMoon",value:function(e,t,i,a,n){var o=I.coinToss([].concat(Object(y.a)(t),[q]))?1:-1,s=I.getRandomFloat(.001,.005,[].concat(Object(y.a)(t),[U]));return{id:this.getNextId(),name:"Moon ".concat(e+1),seed:t,radius:i,terrainHeight:I.getRandom([].concat(Object(y.a)(t),[B])),orbitEntityId:-1,orbitRadius:a,orbitDirection:o,orbitSpeed:(n-e)/n,orbitInclanation:I.getRandomInt(0,45,[].concat(Object(y.a)(t),[Y])),orbitStartPosition:I.getRandom([].concat(Object(y.a)(t),[X])),spinSpeed:s,spinDirection:I.coinToss([].concat(Object(y.a)(t),[Q]))?1:-1,rgb:te([].concat(Object(y.a)(t),[J])),moons:[]}}},{key:"createPlanet",value:function(e,t,i,a,n,o){var s=I.coinToss([].concat(Object(y.a)(t),[q]))?1:-1,r=I.getRandomFloat(.002,.006,[].concat(Object(y.a)(t),[U])),c=I.getRandomFromArray(M,[].concat(Object(y.a)(t),[$]));return{id:this.getNextId(),name:c,seed:t,radius:i,terrainHeight:1,orbitEntityId:o.id,orbitRadius:n,orbitDirection:s,orbitSpeed:(a-e)/a,orbitInclanation:I.getRandomInt(0,15,[].concat(Object(y.a)(t),[Y])),orbitStartPosition:I.getRandom([].concat(Object(y.a)(t),[X])),spinSpeed:r,spinDirection:I.coinToss([].concat(Object(y.a)(t),[Q]))?1:-1,moons:[]}}}]),e}(),te=function(e){return[I.getRandomFloat(.6,1,[].concat(Object(y.a)(e),[0])),I.getRandomFloat(.6,1,[].concat(Object(y.a)(e),[1])),I.getRandomFloat(.6,1,[].concat(Object(y.a)(e),[2]))]},ie=i(2),ae=i(3),ne=function(e){Object(ie.a)(i,e);var t=Object(ae.a)(i);function i(){var e;Object(f.a)(this,i);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).maxTerrainHeight=5,e}return Object(k.a)(i,[{key:"_dispose",value:function(){}},{key:"getMapColour",value:function(e,t){var i=e/64,a=this.params.colour,n=a.r,o=a.g,s=a.b,r=[Math.floor(255*n),Math.floor(255*o),Math.floor(255*s),255];return[r[0]*i,r[1]*i,r[2]*i,r[3]]}}]),i}(j),oe=function(e){Object(ie.a)(i,e);var t=Object(ae.a)(i);function i(){var e;Object(f.a)(this,i);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).maxTerrainHeight=e.radius/16,e.colours={oceanDark:e.getRandomColour(0),oceanLight:e.getRandomColour(1),beachDark:e.getRandomColour(2),beachLight:e.getRandomColour(3),forestDark:e.getRandomColour(4),forestLight:e.getRandomColour(5),jungleDark:e.getRandomColour(6),jungleLight:e.getRandomColour(7),savannahDark:e.getRandomColour(8),savannahLight:e.getRandomColour(9),desertDark:e.getRandomColour(10),desertLight:e.getRandomColour(11),snowDark:e.getRandomColour(12),snowLight:e.getRandomColour(13)},e}return Object(k.a)(i,[{key:"_dispose",value:function(){}},{key:"getMapColour",value:function(e,t){return this.getColourForHeight(e)}},{key:"getColourForHeight",value:function(e){for(var t=0,i=[{min:0,max:60,dark:this.colours.oceanDark,light:this.colours.oceanLight},{min:60,max:70,dark:this.colours.oceanLight,light:this.colours.beachLight},{min:70,max:110,dark:this.colours.forestDark,light:this.colours.forestLight},{min:110,max:120,dark:this.colours.jungleDark,light:this.colours.jungleLight},{min:120,max:140,dark:this.colours.savannahDark,light:this.colours.savannahLight},{min:120,max:150,dark:this.colours.desertDark,light:this.colours.desertLight}];t<i.length;t++){var a=i[t];if(e<a.max)return this.getRangeColour(a,e)}return this.colours.snowLight}},{key:"getRandomColour",value:function(e){var t=[].concat(Object(y.a)(this.params.baseSeed),[e]);return[255*I.getRandomFloat(.2,1,[].concat(Object(y.a)(t),[0])),255*I.getRandomFloat(.2,1,[].concat(Object(y.a)(t),[1])),255*I.getRandomFloat(.2,1,[].concat(Object(y.a)(t),[2])),255]}}]),i}(j),se=function(e){Object(ie.a)(i,e);var t=Object(ae.a)(i);function i(e,a,n,o,s){var r;return Object(f.a)(this,i),(r=t.call(this,e,a,n,o,s)).maxTerrainHeight=0,r.params.terrainHeight=0,r.params.texturePath="assets/sun.jpg",r}return Object(k.a)(i,[{key:"_dispose",value:function(){}},{key:"getMapColour",value:function(e,t){var i=this.params.colour,a=i.r,n=i.g,o=i.b,s=[Math.floor(255*a),Math.floor(255*n),Math.floor(255*o),255];return[s[0],s[1],s[2],s[3]]}}]),i}(j),re={oceanDark:[0,24,168,255],oceanLight:[0,105,148,255],beachDark:[140,129,95,255],beachLight:[221,202,146,255],forestDark:[0,66,37,255],forestLight:[0,127,72,255],jungleDark:[48,102,79,255],jungleLight:[57,122,94,255],savannahDark:[136,155,105,255],savannahLight:[165,189,126,255],desertDark:[175,175,144,255],desertLight:[198,198,167,255],snowDark:[200,200,200,255],snowLight:[255,255,255,255]},ce=function(e){Object(ie.a)(i,e);var t=Object(ae.a)(i);function i(){var e;Object(f.a)(this,i);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).maxTerrainHeight=e.radius/16,e}return Object(k.a)(i,[{key:"_dispose",value:function(){}},{key:"getMapColour",value:function(e,t){return this.getColourForHeight(e)}},{key:"getColourForHeight",value:function(e){for(var t=0,i=[{min:0,max:60,dark:re.oceanDark,light:re.oceanLight},{min:60,max:70,dark:re.oceanLight,light:re.beachLight},{min:70,max:110,dark:re.forestDark,light:re.forestLight},{min:110,max:120,dark:re.jungleDark,light:re.jungleLight},{min:120,max:140,dark:re.savannahDark,light:re.savannahLight},{min:120,max:150,dark:re.desertDark,light:re.desertLight}];t<i.length;t++){var a=i[t];if(e<a.max)return this.getRangeColour(a,e)}return re.snowLight}}]),i}(j);r.a.render(Object(l.jsx)(o.a.StrictMode,{children:Object(l.jsx)(d,{solarSystemApp:new function e(){var t,i=this;Object(f.a)(this,e),this.solarSystem=void 0,this.isRunning=!1,this.scene=void 0,this.camera=void 0,this.clock=new S.f,this.bodies=[],this.renderer=void 0,this.orbitControls=void 0,this.stats=void 0,this.showPlanetId=void 0,this.cameraInitialPosition=void 0,this.spaceTexture=void 0,this.gui=void 0,this.guiViewActionsFolder=void 0,this.guiPlanetsFolder=void 0,this.ambientLight=void 0,this.pointLight=void 0,this.onInitialising=void 0,this.onInitialised=void 0,this.onSelectPlanet=void 0,this.options={seed:982174,simulationSpeed:3,showOrbits:!0,followPlanetName:"Star 1",realisticScale:!1},this.buttonHandlers={resetView:function(){i.resetView()},newSeed:function(){i.options.seed=S.o.randInt(1e5,999999),i.init()},changeSeed:function(){i.init()}},this.init=function(){i.onInitialising&&i.onInitialising(),i.gui.updateDisplay(),i.clearScene(),i.solarSystem=new ee(i.options.seed).generate(),i._init().then((function(){i.resetView(),i.animate(),i.onInitialised&&i.onInitialised()}))},this._init=Object(v.a)(g.a.mark((function e(){var t,n,o,s,r,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.showPlanetId=-1,i.ambientLight=new S.a(16777215,.15),i.scene.add(i.ambientLight),i.pointLight=new S.t(16244886,1),i.pointLight.position.set(0,0,0),i.scene.add(i.pointLight),!i.options.realisticScale){e.next=12;break}return e.next=9,i.renderRealisticSolarSystem();case 9:(t=i.camera.position).set.apply(t,Object(y.a)(i.cameraInitialPosition)),e.next=15;break;case 12:return e.next=14,i.renderSolarSystem();case 14:(n=i.camera.position).set.apply(n,Object(y.a)(i.cameraInitialPosition)).divideScalar(500);case 15:for(o=i.bodies.filter((function(e){return e.entityType===a.Planet})),s=i.bodies.filter((function(e){return e.entityType===a.Star}))[0],i.guiViewActionsFolder=i.gui.addFolder("View Actions"),i.guiViewActionsFolder.open(),i.guiViewActionsFolder.add(i.options,"realisticScale").name("True Scale").onChange(i.init),i.guiViewActionsFolder.add(i.options,"showOrbits").name("Show Orbits").onChange(i.toggleOrbits),i.guiViewActionsFolder.add(i.options,"followPlanetName",[s.name].concat(Object(y.a)(o.map((function(e){return e.name}))))).name("Centre of View"),i.guiViewActionsFolder.add(i.buttonHandlers,"resetView").name("Reset View"),i.guiPlanetsFolder=i.gui.addFolder("Planets"),r=0;r<o.length;r++)c=o[r],i.guiPlanetsFolder.add(c,"show").name("#".concat(r+1,": ").concat(c.name));i.isRunning=!0;case 26:case"end":return e.stop()}}),e)}))),this.animate=function(){if(i.isRunning){if(requestAnimationFrame(i.animate),i.bodies.forEach((function(e){e.animate(i.clock,i.options.simulationSpeed/5,i.camera)})),i.stats.update(),i.showPlanetId>-1){var e=i.bodies.find((function(e){return e.id===i.showPlanetId}));if(e){var t=new S.E;e.sphere.getWorldPosition(t),i.camera.position.set(t.x+2*e.radius,t.y+2*e.radius,t.z+8*e.radius),i.camera.lookAt(t.x,t.y,t.z)}}else{var a=i.bodies.find((function(e){return e.name===i.options.followPlanetName}));if(a){var n=new S.E;a.sphere.getWorldPosition(n),i.orbitControls.target.set(n.x,n.y,n.z),i.orbitControls.update()}}i.renderer.render(i.scene,i.camera)}},this.clearScene=function(){var e,t;i.isRunning=!1;try{i.gui.removeFolder(i.guiViewActionsFolder),i.gui.removeFolder(i.guiPlanetsFolder),i.guiViewActionsFolder.destroy()}catch(o){}null===(e=i.ambientLight)||void 0===e||e.dispose(),null===(t=i.pointLight)||void 0===t||t.dispose();var a,n=Object(m.a)(i.bodies);try{for(n.s();!(a=n.n()).done;){a.value.dispose()}}catch(s){n.e(s)}finally{n.f()}i.bodies=[],i.scene.clear(),i.renderer.render(i.scene,i.camera)},this.resetView=function(){var e,t;(i.showPlanetId=-1,i.options.realisticScale)?(e=i.camera.position).set.apply(e,Object(y.a)(i.cameraInitialPosition)):(t=i.camera.position).set.apply(t,Object(y.a)(i.cameraInitialPosition)).divideScalar(500);i.onSelectPlanet&&i.onSelectPlanet(void 0)},this.handleShowPlanet=function(e){if(i.showPlanetId=e,i.onSelectPlanet){var t=i.solarSystem.planets.find((function(t){return t.id===e}));i.onSelectPlanet(t)}},this.toggleOrbits=function(){var e,t=Object(m.a)(i.bodies);try{for(t.s();!(e=t.n()).done;){var a=e.value;a.orbit&&(a.orbit.opacity=0===a.orbit.opacity?.5:0)}}catch(n){t.e(n)}finally{t.f()}},this.renderRealisticSolarSystem=Object(v.a)(g.a.mark((function e(){var t,n,o,s,r,c,l,h,u,d;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=.001,n=Object(m.a)(i.solarSystem.stars),e.prev=2,n.s();case 4:if((o=n.n()).done){e.next=23;break}return s=o.value,r=s.radius*t,c=s.orbitRadius*t,l=s.orbitSpeed*t,h=new se(s.id,s.name,a.Star,r,{baseSeed:s.seed,position:s.position?Object(p.a)(S.E,Object(y.a)(s.position)):new S.E(0,0,0),colour:new S.g(16763424),orbitEntity:!1,orbitRadius:c,orbitDirection:s.orbitDirection,orbitSpeed:l,orbitInclanation:s.orbitInclanation,orbitStartPosition:s.orbitStartPosition,spinSpeed:s.spinSpeed,spinDirection:s.spinDirection}),e.next=12,h.create();case 12:i.bodies.push(h),i.scene.add(h.entity),u=g.a.mark((function e(n){var o,s,r,c,l,h,u,d,b,v,f,x,w,k,O;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i.solarSystem.planets[n],s=o.radius*t,r=o.orbitRadius*t,c=o.orbitSpeed*t,l=i.bodies.find((function(e){return e.id===o.orbitEntityId})),h={baseSeed:o.seed,position:o.position?Object(p.a)(S.E,Object(y.a)(o.position)):l.entity.position,terrainHeight:o.terrainHeight,orbitEntity:l,orbitRadius:r,orbitDirection:o.orbitDirection,orbitSpeed:c,orbitInclanation:o.orbitInclanation,orbitStartPosition:o.orbitStartPosition,spinSpeed:o.spinSpeed,spinDirection:o.spinDirection,hasLabel:!0,onShow:i.handleShowPlanet},u=2===n?new ce(o.id,o.name,a.Planet,s,h):new oe(o.id,o.name,a.Planet,s,h),e.next=9,u.create();case 9:d=Object(m.a)(o.moons),e.prev=10,d.s();case 12:if((b=d.n()).done){e.next=25;break}return v=b.value,f=v.radius*t,x=v.orbitRadius*t,w=v.orbitSpeed*t,k=u,O=new ne(v.id,v.name,a.Moon,f,{baseSeed:v.seed,position:v.position?Object(p.a)(S.E,Object(y.a)(v.position)):k.entity.position,colour:v.rgb?Object(p.a)(S.g,Object(y.a)(v.rgb)):new S.g(1,1,1),terrainHeight:v.terrainHeight,orbitEntity:k,orbitRadius:x,orbitDirection:v.orbitDirection,orbitSpeed:w,orbitInclanation:v.orbitInclanation,orbitStartPosition:v.orbitStartPosition,spinSpeed:v.spinSpeed,spinDirection:o.spinDirection}),e.next=21,O.create();case 21:i.bodies.push(O),u.entity.add(O.entity);case 23:e.next=12;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(10),d.e(e.t0);case 30:return e.prev=30,d.f(),e.finish(30);case 33:i.bodies.push(u),i.scene.add(u.entity);case 35:case"end":return e.stop()}}),e,null,[[10,27,30,33]])})),d=0;case 16:if(!(d<i.solarSystem.planets.length)){e.next=21;break}return e.delegateYield(u(d),"t0",18);case 18:d++,e.next=16;break;case 21:e.next=4;break;case 23:e.next=28;break;case 25:e.prev=25,e.t1=e.catch(2),n.e(e.t1);case 28:return e.prev=28,n.f(),e.finish(28);case 31:case"end":return e.stop()}}),e,null,[[2,25,28,31]])}))),this.renderSolarSystem=Object(v.a)(g.a.mark((function e(){var t,n,o,s,r,c,l,h,u,d,b,v,f,x,k,O,P,j,A,C,R,M,D;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=.001,n=Object(m.a)(i.solarSystem.stars),e.prev=2,n.s();case 4:if((o=n.n()).done){e.next=27;break}return s=o.value,r=s.radius*t*4,c=s.orbitRadius*t,l=s.orbitSpeed*t,h=new se(s.id,s.name,a.Star,r,{baseSeed:s.seed,position:s.position?Object(p.a)(S.E,Object(y.a)(s.position)):new S.E(0,0,0),colour:new S.g(16763424),orbitEntity:!1,orbitRadius:c,orbitDirection:s.orbitDirection,orbitSpeed:l,orbitInclanation:s.orbitInclanation,orbitStartPosition:s.orbitStartPosition,spinSpeed:s.spinSpeed,spinDirection:s.spinDirection}),e.next=12,h.create();case 12:i.bodies.push(h),i.scene.add(h.entity),u=w()(i.solarSystem.planets),d=Object(m.a)(u);try{for(d.s();!(b=d.n()).done;){v=b.value,4,v.radius*=4,f=Object(m.a)(v.moons);try{for(f.s();!(x=f.n()).done;)(k=x.value).radius*=4,k.orbitSpeed*=4}catch(H){f.e(H)}finally{f.f()}}}catch(H){d.e(H)}finally{d.f()}for(O=0;O<u.length;O++)P=u[O],j=P.moons[P.moons.length-1].orbitRadius,0===O?P.orbitRadius=2*s.radius+2*j:(A=u[O-1],C=A.moons[A.moons.length-1].orbitRadius,P.orbitRadius=A.orbitRadius+C+j,R=(i.solarSystem.planets[O].orbitRadius-i.solarSystem.planets[O-1].orbitRadius)/i.solarSystem.planets[i.solarSystem.planets.length-1].orbitRadius,P.orbitRadius+=R*P.orbitRadius*.5);M=g.a.mark((function e(n){var o,s,r,c,l,h,d,b,v,f,x,w,k,O,P;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=u[n],s=o.radius*t,r=o.orbitRadius*t,c=o.orbitSpeed*t,l=i.bodies.find((function(e){return e.id===o.orbitEntityId})),h={baseSeed:o.seed,position:o.position?Object(p.a)(S.E,Object(y.a)(o.position)):l.entity.position,terrainHeight:o.terrainHeight,orbitEntity:l,orbitRadius:r,orbitDirection:o.orbitDirection,orbitSpeed:c,orbitInclanation:o.orbitInclanation,orbitStartPosition:o.orbitStartPosition,spinSpeed:o.spinSpeed,spinDirection:o.spinDirection,hasLabel:!0,onShow:i.handleShowPlanet},d=2===n?new ce(o.id,o.name,a.Planet,s,h):new oe(o.id,o.name,a.Planet,s,h),e.next=9,d.create();case 9:b=Object(m.a)(o.moons),e.prev=10,b.s();case 12:if((v=b.n()).done){e.next=25;break}return f=v.value,x=f.radius*t,w=f.orbitRadius*t,k=f.orbitSpeed*t*4,O=d,P=new ne(f.id,f.name,a.Moon,x,{baseSeed:f.seed,position:f.position?Object(p.a)(S.E,Object(y.a)(f.position)):O.entity.position,colour:f.rgb?Object(p.a)(S.g,Object(y.a)(f.rgb)):new S.g(1,1,1),terrainHeight:f.terrainHeight,orbitEntity:O,orbitRadius:w,orbitDirection:f.orbitDirection,orbitSpeed:k,orbitInclanation:f.orbitInclanation,orbitStartPosition:f.orbitStartPosition,spinSpeed:f.spinSpeed,spinDirection:o.spinDirection}),e.next=21,P.create();case 21:i.bodies.push(P),d.entity.add(P.entity);case 23:e.next=12;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(10),b.e(e.t0);case 30:return e.prev=30,b.f(),e.finish(30);case 33:i.bodies.push(d),i.scene.add(d.entity);case 35:case"end":return e.stop()}}),e,null,[[10,27,30,33]])})),D=0;case 20:if(!(D<u.length)){e.next=25;break}return e.delegateYield(M(D),"t0",22);case 22:D++,e.next=20;break;case 25:e.next=4;break;case 27:e.next=32;break;case 29:e.prev=29,e.t1=e.catch(2),n.e(e.t1);case 32:return e.prev=32,n.f(),e.finish(32);case 35:case"end":return e.stop()}}),e,null,[[2,29,32,35]])}))),this.solarSystem=new ee(this.options.seed).generate(),this.scene=new S.v,this.scene.background=(new S.g).setHex(0);var n=new S.h;this.spaceTexture=n.load(["assets/kurt/space_ft.png","assets/kurt/space_bk.png","assets/kurt/space_up.png","assets/kurt/space_dn.png","assets/kurt/space_rt.png","assets/kurt/space_lf.png"]),this.scene.background=this.spaceTexture,this.camera=new S.d,this.camera=new S.s(25,window.innerWidth/window.innerHeight,50,1e10),this.cameraInitialPosition=[0,6*this.solarSystem.stars[0].radius,20*this.solarSystem.stars[0].radius],(t=this.camera.position).set.apply(t,Object(y.a)(this.cameraInitialPosition)),this.camera.lookAt(0,0,0),this.renderer=new S.F({powerPreference:"high-performance",antialias:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.shadowMap.enabled=!0,document.body.appendChild(this.renderer.domElement),this.orbitControls=new A.a(this.camera,this.renderer.domElement),this.orbitControls.enableDamping=!0,this.orbitControls.update(),this.stats=new C.a,document.body.appendChild(this.stats.dom),this.gui=new R.a,this.gui.width=300,this.gui.add(this.buttonHandlers,"newSeed").name("New Seed"),this.gui.add(this.options,"seed").name("Seed").onFinishChange(this.buttonHandlers.changeSeed),this.gui.add(this.options,"simulationSpeed",0,20,.1).name("Simulation Speed")}})}),document.getElementById("root"))}},[[350,1,2]]]);
//# sourceMappingURL=main.cb7425c9.chunk.js.map